<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Workspace</title>
  <script src="https://binzume.github.io/aframe/dist/aframe-master.min.js"></script>
  <script src="https://binzume.github.io/aframe-xylayout/dist/xylayout-all.min.js"></script>
  <script src="libs/mp4player/mp4player.js"></script>
  <script src="libs/utils/gesture.js"></script>
  <script src="libs/utils/hand-controller.js"></script>
  <script src="js/workspace.js"></script>
  <script src="apps/mediaplayer/googledrive.js"></script>
  <script src="https://apis.google.com/js/api.js?onload=gapiLoaded" async defer></script>
</head>

<body style="background-color: black; color:white;">
  <div id='applications' style='display:none'>
    <a id="applist" href="#apps-panel" class='hidden'>Apps</a>
    <a id="app-calc" href="apps/calc/template.html">Calculator</a>
    <a id="app-media-selector" href="apps/mediaplayer/template.html#media-selector-template">Storage</a>
    <a id="app-media-player" href="apps/mediaplayer/template.html#media-player-template">MediaPlayer</a>
    <a id="app-vnc" href="apps/vnc/template.html">VNC Client</a>
    <a id="app-vrm" href="apps/vrmviewer/template.html" class='hidden'>VRM Viewer</a>
    <a id="app-vrm-blendShape" href="apps/vrmviewer/template.html">VRM BlendShape</a>
    <a id="app-console" href="#debugConsole" data-wid='debug-console'>Console</a>
    <a id="env-rosso" href="apps/rosso/index.html#env" data-apptype='env'>env:ROSSO</a>
    <a id="env-physics" href="apps/physics/index.html#env" data-apptype='env'>env:Physics</a>
    <a id="env-default" href="#env" data-apptype='env'>env:Default</a>
    <a id="env-empty" href="#empty" data-apptype='env'>env:Empty</a>
  </div>

  <a-scene fog="type: linear; color: #000; near:20;far:100;" renderer="antialias:true;">
    <a-entity id='mouse-cursor' cursor="rayOrigin: mouse; fuse:false" gesture="" raycaster="objects:.collidable;far:5500"></a-entity>
    <a-entity hand-controller=""></a-entity>

    <a-entity id='env'>
      <a-sky></a-sky>
      <a-plane id='ground' wireframe='true' width='10' height='10' segments-height='10' segments-width='10' rotation='90 0 0' color="#111155"></a-plane>
    </a-entity>

    <a-assets>
      <script type="text/plain">dummyForWorkaround</script>

      <template id="empty"></template>

      <!-- menu pane -->
      <template id="mainMenuTemplate">
        <a-xywindow main-menu window-locator="applyCameraPos:false" position="0 1 -1.5" title="Menu" width="5" height="0.6" scale="0.2 0.2 0.2" xycontainer="direction:column;spacing:0.05">
          <a-xycontainer width="5" height="0.6" direction="row" align-items="stretch" justify-items="stretch" spacing="0.05">
            <a-xybutton label="Apps" width="1" launch-on-click="appid:applist"></a-xybutton>
            <a-xybutton label="Storage" width="1" launch-on-click="appid:app-media-selector"></a-xybutton>
            <a-xybutton label="Console" width="1" launch-on-click="appid:app-console"></a-xybutton>
            <a-xybutton name="exitVRButton" label="Exit VR" width="1"></a-xybutton>
          </a-xycontainer>
          <a-xycontainer search-box width="5" height="0.6" direction="row" align-items="stretch" justify-items="stretch"  spacing="0.05">
            <a-xyinput name="searchKeyword" width="3"></a-xyinput>
            <a-xybutton name="searchButton" label="Go" width="1"></a-xybutton>
          </a-xycontainer>
          <a-xycontainer width="5" height="0.6" direction="row" align-items="stretch" justify-items="stretch"  spacing="0.05">
            <a-xylabel simple-clock width="3" height="0.6" value="0000-00-00 00:00:00"></a-xylabel>
          </a-xycontainer>
        </a-xywindow>
      </template>

      <!-- debug console -->
      <template id="debugConsole">
        <a-xywindow title="DebugLog" debug-log="log:debug-text" width="6" height="4" position="2 1 -3" scale="0.2 0.2 0.2">
          <a-text name="debug-text" width="5" height="4" anchor="center" wrap-count="40" value=""></a-text>
        </a-xywindow>
      </template>

      <!-- Apps -->
      <template id="apps-panel">
        <a-xywindow apps-panel xywindow="closable:false;background:true" position="0 1 -1.3" scale="0.15 0.15 0.15" title="Apps" width="5" height="6" xycontainer="direction:column">
          <a-xyscroll width=5 height=5.2 scrollbar=false>
            <a-entity name="apps-panel-list" xylist="" xyrect=""></a-entity>
          </a-xyscroll>
          <a-xycontainer width="5" height="0.8" direction="row" align-items="stretch" justify-items="stretch" spacing="0.05">
            <a-xybutton name="close-button" label="x" width="1"></a-xybutton>
          </a-xycontainer>
        </a-xywindow>
      </template>

    </a-assets>

    <a-entity id="camera-rig" position-controls="axismove:x" camera-control>
      <a-camera position="0 1.5 0" look-controls="enabled:false" wasd-controls="enabled:false"></a-camera>
      <a-entity laser-controls="hand: right" id="rightHand" raycaster="far:Infinity;objects:.collidable" gesture="button:grip"></a-entity>
      <a-entity laser-controls="hand: left" id="leftHand" raycaster="far:Infinity;objects:.collidable"></a-entity>
      <!-- kbd -->
      <a-entity position="0 0.7 -1" scale='0.22 0.22 0.22'>
        <a-xykeyboard ime=true></a-xykeyboard>
      </a-entity>
    </a-entity>

  </a-scene>

  <div style="position:absolute;top:10pt;right:10pt;width:60pt;background-color:white;border-radius:4pt;text-align:center;">
    <a href="https://github.com/binzume/vr-workspace">GitHub</a>
  </div>
  <div style="position:absolute;top:10pt;right:100pt;width:100pt;background-color:white;border-radius:4pt;text-align:center;">
    <a href="/googledrivetest/">Login with Google</a>
  </div>
</body>

</html>
